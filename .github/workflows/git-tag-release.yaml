name: Git Tag & Release
on:
  workflow_call:

jobs:
  git-tag-release:
    runs-on: ubuntu-22.04
    steps:
      - uses: actions/checkout@v3
      - name: tag
        id: tag_version
        uses: mathieudutour/github-tag-action@v6.1
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          release_branches: main,stage
          create_annotated_tag: true
          tag_prefix: ""
      - name: genereate name
        id: fancy_name
        run: |
          arr1=(admiring adoring affectionate agitated amazing angry awesome beautiful blissful bold boring brave busy charming clever cool compassionate competent condescending confident cranky crazy dazzling determined distracted dreamy eager ecstatic elastic elated elegant eloquent epic exciting fervent festive flamboyant focused friendly frosty funny gallant gifted goofy gracious great happy hardcore heuristic hopeful hungry infallible inspiring interesting intelligent jolly jovial keen kind laughing loving lucid magical mystifying modest musing naughty nervous nice nifty nostalgic objective optimistic peaceful pedantic pensive practical priceless quirky quizzical recursing relaxed reverent romantic sad serene sharp silly sleepy stoic strange stupefied suspicious sweet tender thirsty trusting unruffled upbeat vibrant vigilant vigorous wizardly wonderful xenodochial youthful zealous zen)
          arr2=(alena alex andreas anna-barbara anne annika anton benjamin bettina birte brian caroline caspar celina christopher claudia cornelia daniel darleen denise elena elisabeth emilia fenja florian franka gregor grischa hagen hannes holger ingo insa jan jana jasper jochen johannes jonas j√∂rg josefine josephine jule julia juliane kathrin kim lena-josefin lennart leonie lukas maike manon marie-christine mario martin matthias melanie nadine niclas nicola nils ole philip ralf renee roy sabrina sarah sarina sharlyn sophia stella-sophie steven tobias yvonne)
          echo ::set-output name=release_name::"${arr1[RANDOM%${#arr1[@]}]}-${arr2[RANDOM%${#arr2[@]}]}"
      - name: release
        uses: ncipollo/release-action@v1
        with:
          tag: ${{ steps.tag_version.outputs.new_tag }}
          name: ${{ steps.tag_version.outputs.new_tag }} - ${{ steps.fancy_name.outputs.release_name }}
          body: ${{ steps.tag_version.outputs.changelog }}
